---
lab:
  title: Изучение службы хранилища Azure
  module: Explore Azure Storage for non-relational data
---

# <a name="explore-azure-storage"></a>Изучение службы хранилища Azure

В этом упражнении вы подготовите к работе учетную запись службы хранилища Azure в подписке Azure, а также изучите различные способы ее использования для хранения данных.

Выполнение этого задания займет около **15** минут.

## <a name="before-you-start"></a>Перед началом работы

Вам потребуется [подписка Azure](https://azure.microsoft.com/free) с доступом уровня администратора.

## <a name="provision-an-azure-storage-account"></a>Подготовка учетной записи службы хранилища Azure

Первый шаг при использовании службы хранилища Azure — подготовка учетной записи службы хранилища Azure в подписке Azure.

1. Если вы еще этого не сделали, войдите на [портал Azure](https://portal.azure.com?azure-portal=true).
1. На главной странице портала Azure нажмите **&#65291; Создать ресурс** в верхнем левом углу и найдите *Учетную запись хранения*. Затем на полученной странице **Службы хранилища учетной записи** выберите **Создать**.
1. В мастере **Создание учетной записи хранения** введите приведенные ниже значения:
    - **Подписка**: Выберите подписку Azure.
    - **Группа ресурсов**: создайте группу ресурсов с именем по своему выбору.
    - **Служба хранилища имя учетной записи**: введите уникальное имя для учетной записи хранения, используя буквы и цифры в нижнем регистре.
    - **Регион**: выберите любое доступное расположение.
    - **Производительность**: *стандартная*
    - **Избыточность**: *выберите Локально избыточное хранилище (LRS)*

1. Выберите **Далее: Дополнительно >** и просмотрите расширенные параметры конфигурации. В частности, обратите внимание, что в этом случае можно включить иерархическое пространство имен для поддержки Azure Data Lake Storage 2-го поколения. Оставьте этот параметр **<u>невыбранным</u>** (он будет включен позже), а затем нажмите **Далее: Сеть >** , чтобы просмотреть параметры сети для вашей учетной записи хранения.
1. Выберите **Далее: Защита данных >** , а затем в разделе **Восстановление** <u>снимите</u> все флажки **Включить обратимое удаление…** . Эти параметры позволяют хранить удаленные файлы для последующего восстановления, но могут вызвать проблемы позже при включении иерархического пространства имен.
1. Листайте оставшиеся страницы, нажимая **Далее >** и не меняя параметры по умолчанию, а затем на странице **Проверка и создание** дождитесь подтверждения своих настроек и выберите **Создать**. Ваша учетная запись хранения Azure будет создана.
1. Дождитесь завершения развертывания. Затем перейдите к развернутому ресурсу.

## <a name="explore-blob-storage"></a>Исследуйте хранилище BLOB-объектов

Теперь, когда у вас есть учетная запись службы хранилища Azure, можно создать контейнер для данных BLOB-объектов.

1. Скачайте JSON-файл [product1.json](https://aka.ms/product1.json?azure-portal=true) из `https://aka.ms/product1.json` и сохраните его на компьютере (его можно сохранить в любой папке — вы сможете отправить его в хранилище BLOB-объектов позже).

    *Если JSON-файл отображается в браузере, сохраните страницу как **product1.json**.*

1. На странице контейнера хранилища на портале Azure слева в разделе **Хранилище данных** выберите **Контейнеры**.
1. На странице **Контейнеры** выберите **&#65291; Контейнер** и добавьте новый контейнер с именем **data** и уровнем общего доступа **Частный (без анонимного доступа)** .
1. После создания контейнера **data** убедитесь, что он указан на странице **Контейнеры**.
1. В верхней части области слева выберите **Обозреватель хранилища**. На этой странице представлен интерфейс на основе браузера, который можно использовать для работы с данными в вашей учетной записи хранения.
1. На странице обозревателя хранилища выберите **Контейнеры BLOB-объектов** и убедитесь, что контейнер **data** присутствует в списке.
1. Выберите контейнер **data** и обратите внимание, что он пуст.
1. Выберите **&#65291; Добавить каталог** и прочтите сведения о папках, прежде чем создавать новый каталог с именем **products**.
1. В обозревателе хранилища убедитесь, что содержимое только что созданной папки **products** отображается в текущем представлении. Вверху страницы должна быть цепочка навигации **Контейнеры BLOB-объектов > data > products**.
1. В навигационной цепочка выберите **data** для переключения в контейнер **data** и обратите внимание, что она <u>не</u> содержит папку **Products**.

    Папки в хранилище BLOB-объектов являются виртуальными и существуют только как часть пути к BLOB-объекту. Так как папка **Products** не содержит BLOB-объектов, на самом деле это не так.

1. Нажмите кнопку **&#10514; Отправить**, чтобы открыть панель **Отправить BLOB-объект**.
1. На панели **Загрузка BLOB-объектов** выберите файл **product1.json**, сохраненный на локальном компьютере ранее. Затем в разделе **Расширенные настройки** в поле **Загрузить в папку** введите **product_data** и нажмите кнопку **Upload**.
1. Закройте панель **Загрузка BLOB-объектов**, если она еще открыта, и убедитесь, что в контейнере **data** создана **product_data** виртуальная папка.
1. Выберите папку **product_data** и убедитесь, что она содержит отправленный BLOB-объект **product1.json**.
1. В левой части в разделе **Хранилище данных** выберите **Контейнеры**.
1. Откройте контейнер **data** и убедитесь, что в списке указана созданная папка **product_data**.
1. Щелкните значок **&#x2027;&#x2027;&#x2027;** с правого края папки и обратите внимание, что никаких функций не отображается. Папки в контейнере BLOB-объектов с неструктурированным пространством имен являются виртуальными, и управлять ими невозможно.
1. Используйте значок **X** в правом верхнем углу страницы **data**, чтобы закрыть страницу и вернуться на страницу **Контейнеры**.

## <a name="explore-azure-data-lake-storage-gen2"></a>Знакомство с Azure Data Lake Storage 2-го поколения

Поддержка Azure Data Lake Store Gen2 позволяет использовать иерархические папки для организации и управления доступом к BLOB-объектам. Она также позволяет использовать хранилище BLOB-объектов Azure для размещения распределенных файловых систем с общими платформами для аналитики больших данных.

1. Скачайте JSON-файл [product2.json](https://aka.ms/product2.json?azure-portal=true) из `https://aka.ms/product2.json` и сохраните его на компьютере в той же папке, в которой ранее загружалось приложение **product1.json**. Вы сможете отправить его в хранилище BLOB-объектов позже.
1. С левой стороны страницы портала Azure для учетной записи хранения прокрутите экран вниз до раздела **Параметры** и выберите **Обновление Data Lake 2-го поколения**.
1. На странице **Обновление Data Lake 2-го поколения** разверните и выполните каждый шаг, чтобы обновить свою учетную запись хранения для использования иерархического пространства имен и поддержки Azure Data Lake Storage 2-го поколения. Это может занять некоторое время.
1. После завершения обновления в верхней части области слева выберите **Обозреватель хранилища** и вернитесь к корню контейнера BLOB-объектов **data**, который по-прежнему содержит папку **product_data**.
1. Выберите папку **product_data** и убедитесь, что она все еще содержит файл **product1.json**, который вы ранее перегрузили.
1. Нажмите кнопку **&#10514; Отправить**, чтобы открыть панель **Отправить BLOB-объект**.
1. На панели **Загрузка BLOB-объектов** выберите файл **product2.json**, сохраненный на локальном компьютере. Затем нажмите кнопку **Отправить**.
1. Закройте панель **Загрузка BLOB-объектов**, если она еще открыта, и убедитесь, что в папке **product_data** теперь есть файл **product2.json**.
1. В левой части в разделе **Хранилище данных** выберите **Контейнеры**.
1. Откройте контейнер **data** и убедитесь, что в списке указана созданная папка **product_data**.
1. Щелкните значок **&#x2027;&#x2027;&#x2027;** с правого края папки и обратите внимание, что при включенном иерархическом пространстве имен можно выполнять задачи настройки на уровне папки, в том числе переименование папок и задание разрешений.
1. Используйте значок **X** в правом верхнем углу страницы **data**, чтобы закрыть страницу и вернуться на страницу **Контейнеры**.

## <a name="explore-azure-files"></a>Обзор Файлов Azure

Служба Файлов Azure предоставляет способ создания облачных файловых ресурсов.

1. На странице контейнера хранилища на портале Azure слева в разделе **Хранилище данных** выберите **Контейнеры**.
1. На странице "Общие папки" выберите **&#65291; Общая папка** и добавьте новый файловый ресурс с именем **files** и уровнем **оптимизации для транзакций**.
1. В **общих файловых ресурсах** откройте **общую папку**.
1. В верхней части страницы выберите **Подключение**. Затем в области **Подключение** обратите внимание на наличие вкладок для общих операционных систем (Windows, Linux и macOS), содержащих скрипты, которые можно выполнять для подключения к общей папке с клиентского компьютера.
1. Закройте панель **Подключение**, а затем закройте страницу **files**, чтобы вернуться на страницу **Общих файловых ресурсов** для вашей учетной записи хранения Azure.

## <a name="explore-azure-tables"></a>Знакомство с Таблицами Azure

Таблицы Azure предоставляют хранилище "ключ/значение" для приложений, которые должны хранить значения данных, но не нуждаются в полной функциональности и структуре реляционной базы данных.

1. На странице контейнера хранилища на портале Azure слева в разделе **Хранилище данных** выберите **Таблицы**.
1. На странице **Таблицы** выберите **&#65291; Таблица** и создайте новую таблицу с именем **products**.
1. После создания таблицы **products** в верхней части области слева выберите **Обозреватель хранилища**.
1. В обозревателе хранилища выберите **Таблицы** и убедитесь, что таблица **products** указана в списке.
1. Выберите таблицу **products**.
1. На странице **products** выберите **&#65291; Добавление сущности**.
1. На панели **Добавить сущность** введите следующие значения ключей:
    - **PartitionKey**: 1
    - **RowKey**: 1
1. Выберите **Добавить свойство** и создайте новое свойство со следующими значениями:

    |Имя свойства | Тип | Значение |
    | ------------ | ---- | ----- |
    | Имя | Строка | Мини-приложение |

1. Добавьте второе свойство со следующими значениями:

    |Имя свойства | Тип | Значение |
    | ------------ | ---- | ----- |
    | Цена | Double | 2,99 |

1. Нажмите кнопку **Вставить**, чтобы вставить строку для новой сущности в таблицу.
1. В обозревателе хранилища убедитесь, что строка была добавлена в таблицу **Products** и что был создан столбец **timestamp** для указания времени последнего изменения строки.
1. Добавьте еще одну сущность в таблицу **Products** со следующими свойствами:

    |Имя свойства | Тип | Значение |
    | ------------ | ---- | ----- |
    | PartitionKey | Строка | 1 |
    | RowKey | Строковый тип | 2 |
    | Имя | Строка | Kniknak |
    | Цена | Double | 1,99 |
    | Поставки прекращены | Логическое | Да |

1. После вставки новой сущности убедитесь, что в таблице показана строка, содержащая неподдерживаемый продукт.

    Вы вручную указали данные в таблице с помощью интерфейса браузера хранилища. В реальной ситуации разработчики приложений могут использовать API службы хранилища таблиц Azure для создания приложений, считывающих и записывающих значения в таблицы, что делает его экономичным и масштабируемым решением для хранилища NoSQL.

> **Совет**. Когда вы завершите знакомство со службой хранилища Azure, созданную в этом упражнении группу ресурсов можно удалить.
