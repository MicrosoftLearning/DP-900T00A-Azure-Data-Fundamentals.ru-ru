---
ms.openlocfilehash: faba66fd211251cabf9efd984bb907f35d419ce4
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052308"
---
# <a name="open"></a>open

> Открытие таких объектов, как URL-адреса, файлы и исполняемые файлы. Кроссплатформенность.

Пакет предназначен для использования в программах командной строки и скриптах, а не в браузере.

Если эта функциональность требуется для Electron, используйте команду [`shell.openPath()`](https://www.electronjs.org/docs/api/shell#shellopenpathpath).

Примечание. Исходный пакет [`open` ](https://github.com/pwnall/node-open) ранее был объявлен устаревшим в пользу данного пакета. Мы получили это имя, поэтому этот пакет теперь называется `open`, а не `opn`. Если вы обновляете исходный пакет `open` (`open@0.0.5` или более ранней версии), имейте в виду, что API отличается.

#### <a name="why"></a>Почему?

- Активно поддерживается.
- Поддерживает аргументы приложения.
- Безопаснее, так как использует `spawn` вместо `exec`.
- Устраняет большинство исходных проблем `node-open`.
- Включает последний [скрипт `xdg-open` ](https://cgit.freedesktop.org/xdg/xdg-utils/commit/?id=c55122295c2a480fa721a9614f0e2d42b2949c18) для Linux.
- Поддерживает пути WSL к приложениям Windows.

## <a name="install"></a>Установка

```
$ npm install open
```

## <a name="usage"></a>Использование

```js
const open = require('open');

(async () => {
    // Opens the image in the default image viewer and waits for the opened app to quit.
    await open('unicorn.png', {wait: true});
    console.log('The image viewer app quit');

    // Opens the URL in the default browser.
    await open('https://sindresorhus.com');

    // Opens the URL in a specified browser.
    await open('https://sindresorhus.com', {app: 'firefox'});

    // Specify app arguments.
    await open('https://sindresorhus.com', {app: ['google chrome', '--incognito']});
})();
```

## <a name="api"></a>API

Использует команду `open` в macOS, `start` в Windows и `xdg-open` на других платформах.

### <a name="opentarget-options"></a>open(target, options?)

Возвращает обещание для [порожденного дочернего процесса](https://nodejs.org/api/child_process.html#child_process_class_childprocess). Как правило, оно ни для чего не используется, но может быть полезно, если требуется присоединить пользовательские прослушиватели событий или выполнить другие операции непосредственно в порожденном процессе.

#### <a name="target"></a>target

Тип: `string`

То, что нужно открыть. Это может быть URL-адрес, файл или исполняемый файл.

Открывается в приложении по умолчанию для этого типа файла. Например, URL-адреса открываются в браузере по умолчанию.

#### <a name="options"></a>options

Тип: `object`

##### <a name="wait"></a>wait

Тип: `boolean`\
По умолчанию: `false`

Ждать завершения работы открытого приложения перед выполнением обещания. При значении `false` обещание выполняется немедленно при открытии приложения.

Обратите внимание, что ожидается завершение работы приложения, а не закрытие окна.

В Windows необходимо явно указать приложение, для которого выполняется ожидание.

##### <a name="background-supmacos-onlysup"></a>background <sup>(только для macOS)</sup>

Тип: `boolean`\
По умолчанию: `false`

Не перемещать приложение на передний план.

##### <a name="app"></a>app

Тип: `string | string[]`

Укажите приложение, с помощью которого будет открываться `target`, или массив с приложением и аргументами приложения.

Имя приложения зависит от платформы. Не включайте его в код повторно используемых модулей. Например, Chrome называется `google chrome` в macOS, `google-chrome` в Linux и `chrome` в Windows.

Также можно передать полный путь приложения. Например, в WSL это может быть `/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe` для установленного браузера Chrome в Windows.

##### <a name="url"></a>url

Тип: `boolean`\
По умолчанию: `false`

Использует `URL` для кодирования целевого объекта перед его выполнением.<br>
Не рекомендуется использовать этот параметр с целевыми объектами, которые не являются URL-адресами.

Он особенно полезен при работе с [двойными кавычками в Windows](#double-quotes-on-windows).

##### <a name="allownonzeroexitcode"></a>allowNonzeroExitCode

Тип: `boolean`\
По умолчанию: `false`

Разрешить открытому приложению завершить работу с ненулевым кодом завершения, если параметр `wait` имеет значение `true`.

Задавать этот параметр не рекомендуется. Успехом принято считать код завершения равный нулю.

## <a name="caveats"></a>Предупреждения

### <a name="double-quotes-on-windows"></a>Двойные кавычки в Windows

TL;DR: Все двойные кавычки удаляются из `target` и не попадают в нужное место назначения (в Windows).

В связи с особым поведением командной строки Windows (`cmd.exe`) в отношении символа амперсанда (`&`), который разбивает команды и URL-адреса, двойные кавычки считаются отдельным случаем.

Решение ([No 146](https://github.com/sindresorhus/open/pull/146)) для этой и других проблем связано с тем, что `cmd.exe` интерпретирует аргумент в двойных кавычках как простой текстовый аргумент (например, так уже делает Node.js). К сожалению, `cmd.exe` может выполнять только **одно из** двух действий: обрабатывать все кавычки **ИЛИ** не обрабатывать их вообще. Согласно собственной документации:

>*Если указан параметр /C или /K, оставшаяся часть командной строки после параметра обрабатывается как командная строка, а кавычки обрабатываются следующим образом:*
>
>    1.  *Если выполняются все следующие условия, кавычки в командной строке сохраняются:*
>        - *нет параметра /S*
>        - *имеется ровно две кавычки*
>        - *нет специальных символов (&<>()@^|) между двумя кавычками*
>        - *между двумя кавычками есть один или несколько пробелов*
>        - *строка между двумя кавычками — это имя исполняемого файла.*
>
>    2.  *В противном случае применяется старое поведение, а именно: выяснить, является ли первый символ кавычкой, и если да, удалить его и последнюю кавычку в командной строке, сохранив весь текст после последней кавычки.*

Второй вариант позволяет решать все проблемы, и для большей согласованности поведения мы теперь также используем параметр `/S`, поэтому **всегда** получаем второй вариант. Однако нужно помнить, что эта встроенная обработка двойных кавычек приводит к их удалению из командной строки, и до сих пор мы не смогли найти рабочий метод экранирования (если вы его знаете, можете сообщить нам).

Чтобы эта особенность оказывала меньшее влияние (по крайней мере для URL-адресов), ознакомьтесь с [параметром url](#url). Если он используется с URL-адресом, двойные кавычки сохраняются.

## <a name="related"></a>Сопутствующие материалы

- [open-cli](https://github.com/sindresorhus/open-cli) — CLI для этого модуля
- [open-editor](https://github.com/sindresorhus/open-editor) — открытие файлов в редакторе на определенной строке и столбце

---

<div align="center">
    <b>
        <a href="https://tidelift.com/subscription/pkg/npm-opn?utm_source=npm-opn&utm_medium=referral&utm_campaign=readme">Получите профессиональную поддержку для этого пакета с подпиской Tidelift</a>
    </b>
    <br>
    <sub>Tidelift помогает поддерживать ПО с открытым исходным кодом и предоставляет компаниям<br>гарантии безопасности, обслуживание и лицензирование для зависимостей.
    </sub>
</div>
