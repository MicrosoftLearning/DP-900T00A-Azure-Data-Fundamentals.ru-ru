---
ms.openlocfilehash: a99dd16ee6283131f11f543fc7caf0badb805d7a
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052556"
---
# <a name="pump"></a>pump

pump — это небольшой модуль в node.js, который объединяет потоки и уничтожает их все, если один из них закрывается.

```
npm install pump
```

[![Статус сборки](http://img.shields.io/travis/mafintosh/pump.svg?style=flat)](http://travis-ci.org/mafintosh/pump)

## <a name="what-problem-does-it-solve"></a>Какие задачи решает этот пакет

При использовании стандартного метода `source.pipe(dest)` источник _не_ уничтожается, если dest создает событие закрытия или ошибки.
Вы также не можете предоставить обратный вызов, чтобы определить, когда конвейер завершил работу.

pump делает эти две вещи для вас

## <a name="usage"></a>Использование

Просто передайте потоки, которые нужно объединить, в pump и добавьте необязательный обратный вызов.

``` js
var pump = require('pump')
var fs = require('fs')

var source = fs.createReadStream('/dev/random')
var dest = fs.createWriteStream('/dev/null')

pump(source, dest, function(err) {
  console.log('pipe finished', err)
})

setTimeout(function() {
  dest.destroy() // when dest is closed pump will destroy source
}, 1000)
```

С помощью pump можно объединять больше двух потоков

``` js
var transform = someTransformStream()

pump(source, transform, anotherTransform, dest, function(err) {
  console.log('pipe finished', err)
})
```

Если закрывается поток `source`, `transform`, `anotherTransform` или `dest`, уничтожаются они все.

Аналогично `stream.pipe()`, метод `pump()` возвращает последний переданный поток, поэтому:

```
return pump(s1, s2) // returns s2
```

Если вы хотите вернуть поток, включающий *оба* потока, s1 и s2, в один поток, используйте [pumpify](https://github.com/mafintosh/pumpify).

## <a name="license"></a>Лицензия

MIT

## <a name="related"></a>Сопутствующие материалы

`pump` входит в [коллекцию служебных программ mississippi для работы с потоками](https://github.com/maxogden/mississippi), в которой есть более полезные модули для работы с потоками, аналогичные этому.
