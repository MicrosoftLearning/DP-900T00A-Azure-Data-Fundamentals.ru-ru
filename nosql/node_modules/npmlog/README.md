---
ms.openlocfilehash: f445a828ea5ae5cba850b910d938f10a783a7ed8
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051987"
---
# <a name="npmlog"></a>npmlog

Средство ведения журнала, которое использует npm.

Это средство ведения журнала отличается простотой.  Оно ведет журнал для npm.  Оно поддерживает пользовательские уровни и цветную маркировку выходных данных.

По умолчанию журналы записываются в stderr.  Если требуется отправлять сообщения журнала в выходные данные, отличные от потоков, вы можете изменить элемент `log.stream` или просто прослушивать события, которые он выдает, и выполнять с ним любые операции.

# <a name="installation"></a>Установка

```console
npm install npmlog --save
```

# <a name="basic-usage"></a>Основное использование

```javascript
var log = require('npmlog')

// additional stuff ---------------------------+
// message ----------+                         |
// prefix ----+      |                         |
// level -+   |      |                         |
//        v   v      v                         v
    log.info('fyi', 'I have a kitty cat: %j', myKittyCat)
```

## <a name="loglevel"></a>log.level

* {Строка}

Уровень отображения журналов.  Будут отображаться все журналы на этом уровне или выше.  Специальный уровень `silent` запрещает отображение любых журналов.

## <a name="logrecord"></a>log.record

* {Array}

Массив всех введенных сообщений журнала.

## <a name="logmaxrecordsize"></a>log.maxRecordSize

* {Number}

Максимальное число сохраняемых записей.  Если значение log.record превышает 10%, оно срезается до 90 % от этого значения.

Причина выбора окна в 10% заключается в том, что размер большого массива для каждой записи журнала не требуется изменять.

## <a name="logprefixstyle"></a>log.prefixStyle

* {Object}

Объект стиля, который указывает способ настройки стиля для префиксов.  (См. ниже)

## <a name="logheadingstyle"></a>log.headingStyle

* {Object}

Объект стиля, указывающий способ настройки стиля для заголовка.  (См. ниже)

## <a name="logheading"></a>log.heading

* {String} По умолчанию: ""

Если этот заголовок настроен, он печатается в начале каждой строки.

## <a name="logstream"></a>log.stream

* {Stream} По умолчанию: `process.stderr`

Поток, в котором записываются выходные данные.

## <a name="logenablecolor"></a>log.enableColor()

Принудительное использование цветовой маркировки для всех сообщений независимо от выходного потока.

## <a name="logdisablecolor"></a>log.disableColor()

Отключение цветовой маркировки для всех сообщений.

## <a name="logenableprogress"></a>log.enableProgress()

Включение отображения счетчика действий журнала и индикатора выполнения

## <a name="logdisableprogress"></a>log.disableProgress()

Отключение отображения индикатора выполнения

## <a name="logenableunicode"></a>log.enableUnicode()

Принудительное использование темы Юникод для индикатора выполнения.

## <a name="logdisableunicode"></a>log.disableUnicode()

Отключите использование Юникод на индикаторе выполнения.

## <a name="logsetgaugetemplatetemplate"></a>log.setGaugeTemplate(template)

Задайте шаблон для вывода индикатора выполнения. Дополнительные сведения см. в [документации по датчику].

[документации по датчику]: https://npmjs.com/package/gauge

## <a name="logsetgaugethemesetthemes"></a>log.setGaugeThemeset(themes)

Выберите набор тем, чтобы выбрать темы для индикатора выполнения. Дополнительные сведения см. в [документации по датчику].

## <a name="logpause"></a>log.pause()

Остановите отправку сообщений в поток, но не удаляйте их.

## <a name="logresume"></a>log.resume()

Отправляют все сообщения в буфере, записанные во время приостановки.

## <a name="logloglevel-prefix-message-"></a>log.log(level, prefix, message, ...)

* `level` {String} Уровень, на который будет отправлено сообщение
* `prefix` {String} Префикс строки.  Установите значение "", чтобы пропустить.
* `message...` Аргументы в `util.format`

Отправка сообщения журнала на указанный уровень.

## <a name="loglevel"></a>log\[level](prefix, message, ...)

Например, примененная к объекту директива

* log.silly(prefix, message, ...)
* log.verbose(prefix, message, ...)
* log.info(prefix, message, ...)
* log.http(prefix, message, ...)
* log.warn(prefix, message, ...)
* log.error(prefix, message, ...)

Например, `log.log(level, prefix, message, ...)`.  Таким образом, каждому уровню присваивается собирательное свойство, чтобы разрешить выполнение `log.info(prefix, message)`.

## <a name="logaddlevellevel-n-style-disp"></a>log.addLevel(level, n, style, disp)

* `level` {String} Индикатор уровня
* `n` {Number} Числовой уровень
* `style` {Object} Объект с fg, bg, inverse и т.д.
* `disp` {String} Необязательная замена для `level` в выходных данных.

Настраивает новый уровень с помощью сокращенной функции и т. д.

Обратите внимание, что если используется номер `Infinity`, то настройка уровня с этим номером подавляет все сообщения журнала.  Если используется номер `-Infinity`, единственным способом его отображения является включение всех сообщений журнала.

## <a name="lognewitemname-todo-weight"></a>log.newItem(name, todo, weight)

* `name` {String} Необязательный; имя элемента хода выполнения.
* `todo` {Number} Необязательный; общий объем работ, которые необходимо выполнить. По умолчанию 0.
* `weight` {Number} Необязательный; вес этого элемента относительно других элементов. По умолчанию 1.

При этом в средство отслеживания хода выполнения добавляется новое средство отслеживания элементов `are-we-there-yet`. Возвращаемый объект содержит методы `log[level]`, но в ином случае является объектом `are-we-there-yet` `Tracker`.

## <a name="lognewstreamname-todo-weight"></a>log.newStream(name, todo, weight)

При этом в средство отслеживания хода выполнения добавляется новое средство отслеживания потоков `are-we-there-yet`. Возвращаемый объект содержит методы `log[level]`, но в ином случае является объектом `are-we-there-yet` `TrackerStream`.

## <a name="lognewgroupname-weight"></a>log.newGroup(name, weight)

При этом в средство отслеживания хода выполнения добавляется новая группа средства отслеживания `are-we-there-yet`. Возвращаемый объект содержит методы `log[level]`, но в ином случае является объектом `are-we-there-yet` `TrackerGroup`.

# <a name="events"></a>События

События отправляются вместе с объектом сообщения.

* `log` Отправляется для всех сообщений
* `log.<level>` Создается для всех сообщений с уровнем `<level>`.
* `<prefix>` Сообщения с префиксами также отправляют их префикс в качестве события.

# <a name="style-objects"></a>Объекты стиля

Объекты стиля могут содержать следующие поля:

* `fg` {String} Цвет для текста переднего плана
* `bg` {String} Цвет фона
* `bold`, `inverse`, `underline` {Boolean} Установка связанного свойства
* `bell` {Boolean} Создать шум (это довольно раздражает, вероятно.)

# <a name="message-objects"></a>Объекты сообщений

Каждое событие журнала создается с помощью объекта сообщения, а список `log.record` содержит все созданные объекты.  Они содержат следующие поля:

* `id` {Number}
* `level` {String}
* `prefix` {String}
* `message` {String} Результат `util.format()`
* `messageRaw` {Array} Аргументы в `util.format()`

# <a name="blocking-ttys"></a>Блокировка TTY

Мы используем [`set-blocking`](https://npmjs.com/package/set-blocking) для задания блокировки stderr и stdout, если они не являются TTY и содержат вызов setBlocking.
Это временное решение для проблемы, которая наблюдается в ранних версиях Node.js 6.x, из-за которой stderr и stdout стали неблокирующими в OSX. (Они всегда блокировали Windows и никогда не были блокирующими в Linux.) Они должны быть блокирующими в `npmlog`, чтобы разрешить чересстрочное отображение вывода в stdout и stderr.
