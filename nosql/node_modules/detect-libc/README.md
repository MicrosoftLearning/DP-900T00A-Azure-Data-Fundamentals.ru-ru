---
ms.openlocfilehash: 62ec6880a3e3b2a52d60ca46578b47a88379c266
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052231"
---
# <a name="detect-libc"></a>detect-libc

Модуль node.js для обнаружения семейства реализаций стандартной библиотеки C (libc) и версий, используемых в данной системе Linux.

Предоставляет значение, которое можно использовать с параметром `LIBC` в [prebuild](https://www.npmjs.com/package/prebuild), [prebuild-ci](https://www.npmjs.com/package/prebuild-ci) и [prebuild-install](https://www.npmjs.com/package/prebuild-install), что позволяет создавать и подготавливать к работе предварительно скомпилированные двоичные файлы для дистрибутивов Linux на основе musl (например, Alpine) и на основе glibc.

В настоящее время поддерживает обнаружение libc для `glibc` и `musl`.

## <a name="install"></a>Установка

```sh
npm install detect-libc
```

## <a name="usage"></a>Использование

### <a name="api"></a>API

```js
const { GLIBC, MUSL, family, version, isNonGlibcLinux } = require('detect-libc');
```

* `GLIBC` — это строка, содержащая значение glibc для сравнения с `family`.
* `MUSL` — это строка, содержащая значение musl для сравнения с `family`.
* `family` — это строка, представляющая семейство системных библиотек libc.
* `version` — это строка, представляющая номер версии системной библиотеки libc.
* `isNonGlibcLinux` — это логическое значение, которое указывает, создан ли дистрибутив Linux не на основе glib (например, Alpine).

### <a name="detect-libc-command-line-tool"></a>Программа командной строки detect-libc

При запуске в системе Linux с библиотекой libc, отличной от glibc, дочерняя команда будет выполняться с переменной среды `LIBC`, которой задано соответствующее значение.

На всех остальных платформах дочерняя команда выполняется "как есть".

Для командной строки требуется `spawnSync` из node.js 0.12 и более поздних версий.

```sh
detect-libc child-command
```

## <a name="integrating-with-prebuild"></a>Интеграция с предварительной сборкой

```json
  "scripts": {
    "install": "detect-libc prebuild-install || node-gyp rebuild",
    "test": "mocha && detect-libc prebuild-ci"
  },
  "dependencies": {
    "detect-libc": "^1.0.2",
    "prebuild-install": "^2.2.0"
  },
  "devDependencies": {
    "prebuild": "^6.2.1",
    "prebuild-ci": "^2.2.3"
  }
```

## <a name="licence"></a>Лицензия

(С) Lovell Fuller, 2017

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License.
You may obtain a copy of the License at [http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0.html)

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.
