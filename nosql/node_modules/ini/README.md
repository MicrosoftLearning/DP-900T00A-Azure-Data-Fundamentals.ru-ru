---
ms.openlocfilehash: 1997c778eb616617ba9d369f6a27828bf83af8b8
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052011"
---
Средство синтаксического анализа и сериализатор для узла.

Разделы обрабатываются как вложенные объекты.  Элементы перед первым заголовком сохраняются непосредственно в объекте.

## <a name="usage"></a>Использование

Рассмотрим ini-файл `config.ini`, который выглядит следующим образом:

    ; this comment is being ignored
    scope = global

    [database]
    user = dbuser
    password = dbpassword
    database = use_this_database

    [paths.default]
    datadir = /var/lib/data
    array[] = first value
    array[] = second value
    array[] = third value

Вы можете считывать, управлять и записывать ini-файл следующим образом:

    var fs = require('fs')
      , ini = require('ini')

    var config = ini.parse(fs.readFileSync('./config.ini', 'utf-8'))

    config.scope = 'local'
    config.database.database = 'use_another_database'
    config.paths.default.tmpdir = '/tmp'
    delete config.paths.default.datadir
    config.paths.default.array.push('fourth value')

    fs.writeFileSync('./config_modified.ini', ini.stringify(config, { section: 'section' }))

Это приведет к записи в файловую систему файла `config_modified.ini` со следующим содержимым:

    [section]
    scope=local
    [section.database]
    user=dbuser
    password=dbpassword
    database=use_another_database
    [section.paths.default]
    tmpdir=/tmp
    array[]=first value
    array[]=second value
    array[]=third value
    array[]=fourth value


## <a name="api"></a>API

### <a name="decodeinistring"></a>decode(inistring)

Декодируйте ini-style в формате `inistring` во вложенный объект.

### <a name="parseinistring"></a>parse(inistring)

Псевдоним для `decode(inistring)`

### <a name="encodeobject-options"></a>encode(object, [options])

Закодируйте объект `object` в строку в формате ini-style. Если указан необязательный параметр `section`, все свойства верхнего уровня объекта помещаются в этот раздел, а строк `section` добавляется ко всем вложенным разделам, см. приведенный выше пример использования.

Объект `options` может содержать следующие данные:

* Строка `section`, которая будет первой `section` в закодированных данных ini.  Значение по умолчанию — none.
* Логическое значение `whitespace`, указывающее, следует ли добавлять пробелы вокруг символа `=`.  По умолчанию пустое пространство опускается, чтобы обеспечить поддержку некоторых устаревших средств синтаксического анализ persnickety, которые плохо его переносят.  Но некоторые считают, что использование пробелов повышает удобочитаемость.

Для обеспечения обратной совместимости, если передаются параметры `string`, предполагается значение `section`.

### <a name="stringifyobject-options"></a>stringify(object, [options])

Псевдоним для `encode(object, [options])`

### <a name="safeval"></a>safe(val)

Удаляет строку `val` так, чтобы ее можно было безопасно использовать в качестве ключа или значения в ini-файле. Кавычки в основном удаляются. Например.

    ini.safe('"unsafe string"')

приводит к

    "\"unsafe string\""

### <a name="unsafeval"></a>unsafe(val)

Отменяет удаление строки `val`
