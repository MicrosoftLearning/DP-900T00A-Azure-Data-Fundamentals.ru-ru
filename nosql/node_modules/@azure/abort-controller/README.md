---
ms.openlocfilehash: fe1a29595719e88783616e54c070b9b946052910
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052644"
---
# <a name="azure-abort-controller-library-for-javascript"></a>Библиотека контроллера прерывания Azure для JavaScript

Пакет `@azure/abort-controller` предоставляет классы `AbortController` и `AbortSignal`. Эти классы совместимы с [AbortController](https://developer.mozilla.org/docs/Web/API/AbortController), который встроен в современные браузеры и используется `AbortSignal` при [получении](https://developer.mozilla.org/docs/Web/API/Fetch_API).
Используйте класс `AbortController` для создания экземпляра класса `AbortSignal`, который можно использовать для отмены операции в пакете SDK Azure с применением параметра типа `AbortSignalLike`.

## <a name="getting-started"></a>Начало работы

### <a name="installation"></a>Установка

Установите эту библиотеку с помощью npm

```
npm install @azure/abort-controller
```

## <a name="key-concepts"></a>Основные понятия

Используйте `AbortController` для создания `AbortSignal`, который затем можно передать операциям пакета Azure SDK для отмены ожидающих заданий. Доступ для `AbortSignal` можно получить с помощью свойство `signal` в экземпляре `AbortController`.
Также `AbortSignal` можно вернуть непосредственно статическим методом, например `AbortController.timeout(100)`.
который отменяется через 100 миллисекунд.

Вызов `abort()` экземпляра `AbortController` вызывает зарегистрированные прослушиватели событий `abort` в связанном объекте `AbortSignal`.
Любые последующие вызовы `abort()` к тому же контроллеру не будут действовать.

Статическое свойство `AbortSignal.none` возвращает значение`AbortSignal`, которое не может быть отменено.

Несколько экземпляров `AbortSignal` можно связать таким образом, чтобы вызов `abort()` родительского сигнала прервал все связанные сигналы.
Это связывание является односторонним, то есть родительский сигнал может повлиять на связанный сигнал, но не наоборот.
Чтобы связать `AbortSignals` вместе, передайте родительские сигналы конструктору `AbortController`.

## <a name="examples"></a>Примеры

В приведенных ниже примерах предполагается, что `doAsyncWork` это функция, которая принимает контейнер свойств, одно из которых является сигналом прерывания.

### <a name="example-1---basic-usage"></a>Пример 1. Базовое использование

```js
import { AbortController } from "@azure/abort-controller";

const controller = new AbortController();
doAsyncWork({ abortSignal: controller.signal });

// at some point later
controller.abort();
```

### <a name="example-2---aborting-with-timeout"></a>Пример 2. Прерывание с истечением времени ожидания

```js
import { AbortController } from "@azure/abort-controller";

const signal = AbortController.timeout(1000);
doAsyncWork({ abortSignal: signal });
```

### <a name="example-3---aborting-sub-tasks"></a>Пример 3. Прерывание вложенных задач

```js
import { AbortController } from "@azure/abort-controller";

const allTasksController = new AbortController();

const subTask1 = new AbortController(allTasksController.signal);
const subtask2 = new AbortController(allTasksController.signal);

allTasksController.abort(); // aborts allTasksSignal, subTask1, subTask2
subTask1.abort(); // aborts only subTask1
```

### <a name="example-4---aborting-with-parent-signal-or-timeout"></a>Пример 4. Прерывание с родительским сигналом или по времени ожидания

```js
import { AbortController } from "@azure/abort-controller";

const allTasksController = new AbortController();

// create a subtask controller that can be aborted manually,
// or when either the parent task aborts or the timeout is reached.
const subTask = new AbortController(allTasksController.signal, AbortController.timeout(100));

allTasksController.abort(); // aborts allTasksSignal, subTask
subTask.abort(); // aborts only subTask
```

## <a name="contributing"></a>Участие

Если вы хотите вносить изменения в эту библиотеку, ознакомьтесь с [руководством по внесению изменений](https://github.com/Azure/azure-sdk-for-js/blob/master/CONTRIBUTING.md), в котором содержатся сведения о создании и тестировании кода.

![Просмотры](https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-js%2Fsdk%2Fcore%2Fabort-controller%2FREADME.png)
